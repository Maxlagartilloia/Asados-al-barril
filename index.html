<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Punto Cero al Barril - Costillas y BBQ</title>

    <!-- SEO b√°sico -->
    <meta name="description" content="Punto Cero al Barril: costillas asadas al barril, panceta crujiente, picanha y bandejas para compartir. Haz tu pedido para mesa o domicilio directo por WhatsApp.">
    <meta name="author" content="Punto Cero al Barril">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&family=Bebas+Neue&display=swap" rel="stylesheet">

    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #1A1A1A; /* Dark Smoke */
            background-image: 
                radial-gradient(circle at 10% 80%, rgba(220, 38, 38, 0.18), transparent 70%),
                radial-gradient(circle at 90% 20%, rgba(252, 211, 77, 0.14), transparent 70%),
                repeating-linear-gradient(45deg, rgba(0,0,0,0.08) 0, rgba(0,0,0,0.08) 2px, transparent 2px, transparent 4px),
                repeating-linear-gradient(-45deg, rgba(0,0,0,0.06) 0, rgba(0,0,0,0.06) 2px, transparent 2px, transparent 4px);
            background-size: 100% 100%, 100% 100%, 50px 50px, 50px 50px;
            overflow-x: hidden;
            color: #E5E7EB;
        }

        /* Colores de marca BBQ */
        .brand-red-text { color: #DC2626; }
        .brand-gold-text { color: #FCD34D; }
        .bg-brand-red { background-color: #DC2626; }
        .hover\:bg-brand-red-dark:hover { background-color: #B91C1C; }
        .bg-brand-dark { background-color: #2C1E18; }
        .border-brand-gold { border-color: #FCD34D; }

        .product-name {
            font-family: 'Bebas Neue', sans-serif;
            letter-spacing: 0.08em;
        }

        /* Header estilo barril/metal */
        .header-bar {
            background-color: #2C1E18;
            box-shadow: 0 4px 10px rgba(0,0,0,0.55);
            border-bottom: 3px solid #FCD34D;
        }

        /* T√≠tulo brasas */
        .grill-glow-text {
            text-shadow:
                0 0 4px rgba(255,165,0,0.8),
                0 0 10px rgba(255,69,0,0.7),
                0 0 18px rgba(220,38,38,0.7);
        }

        /* Imagen del producto bien enmarcada */
        .image-box {
            position: relative;
            width: 100%;
            aspect-ratio: 4 / 3;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #2C1E18;
            padding: 0.75rem;
            border-radius: 0.75rem 0.75rem 0 0;
        }
        .image-box img {
            max-height: 100%;
            max-width: 100%;
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0.6rem;
            box-shadow: 0 6px 16px rgba(0,0,0,0.7);
        }

        /* Card de producto */
        .product-card {
            transition: all 0.25s ease-out;
        }
        .product-card:hover {
            transform: translateY(-4px) scale(1.01);
            box-shadow: 0 18px 35px rgba(0,0,0,0.75);
        }

        /* Modal notificaci√≥n */
        #notification-modal {
            transition: opacity 0.25s ease-out;
        }
        #notification-modal .modal-inner {
            transition: transform 0.25s ease-out;
        }

        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.6rem;
            }
        }
    </style>
</head>
<body class="text-white">

    <!-- HEADER -->
    <header class="header-bar sticky top-0 z-50">
        <div class="container mx-auto px-4 sm:px-6 py-3 flex justify-between items-center gap-3">
            <!-- LOGO GRANDE (se eliminaron los textos al lado) -->
            <a href="#" onclick="showPage('home')" class="flex items-center">
                <img
                    src="https://i.postimg.cc/K8b8VN57/IMG-0320.png"
                    alt="Punto Cero al Barril"
                    class="h-24 sm:h-26 md:h-30 w-auto object-contain"
                >
            </a>

            <!-- Navegaci√≥n desktop -->
            <nav class="hidden md:flex items-center gap-6 font-semibold text-sm">
                <a href="#productos" class="hover:text-yellow-300 transition-colors">Men√∫</a>
                <a href="#experiencia" class="hover:text-yellow-300 transition-colors">Experiencia</a>
                <a href="#footer-contact" class="hover:text-yellow-300 transition-colors">Contacto</a>
            </nav>

            <!-- Bot√≥n carrito -->
            <button
                id="cart-button"
                onclick="showPage('checkout')"
                class="relative bg-brand-red text-white px-4 py-2 rounded-full font-bold hover:bg-brand-red-dark transition-colors flex items-center gap-2 shadow-lg text-sm sm:text-base"
                aria-label="Ver pedido actual"
            >
                <i class="fas fa-shopping-basket"></i>
                <span class="hidden sm:inline">Pedido</span>
                <span
                    id="cart-count"
                    class="absolute -top-2 -right-2 bg-brand-gold text-black text-[11px] rounded-full h-5 w-5 flex items-center justify-center font-bold"
                >0</span>
            </button>
        </div>
    </header>

    <!-- HOME / MEN√ö -->
    <main id="home-page" class="relative z-10">
        <!-- HERO -->
        <section class="py-16 md:py-20">
            <div class="container mx-auto px-4 sm:px-6 text-center max-w-4xl">
                <h1 class="hero-title text-4xl md:text-6xl lg:text-7xl font-extrabold leading-tight mb-4 text-white grill-glow-text product-name">
                    ¬°El sabor ahumado es el Punto Cero!
                </h1>
                <p class="text-base md:text-lg text-gray-200">
                    Costillas al barril, panceta crujiente, picanha y bandejas para compartir.
                    Cocci√≥n lenta, fuego real y salsas de la casa que te van a amarrar al barril. üî•
                </p>
                <a
                    href="#productos"
                    class="mt-8 inline-block bg-brand-gold text-black text-lg md:text-xl font-extrabold py-3 px-10 rounded-full transition-all hover:bg-yellow-400 shadow-xl transform hover:scale-105"
                >
                    Ver men√∫ ahora
                </a>
                <p class="mt-3 text-xs text-gray-400">
                    Escanea el QR en tu mesa o pide a domicilio directo por WhatsApp.
                </p>
            </div>
        </section>

        <!-- PRODUCTOS -->
        <section id="productos" class="py-12 md:py-16">
            <div class="container mx-auto px-4 sm:px-6">
                <h2 class="text-3xl md:text-4xl font-bold mb-10 text-center text-white product-name">
                    Nuestros Platos Estrellas
                </h2>
                <div
                    id="product-list"
                    class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8"
                >
                    <!-- Cards generadas por JS -->
                </div>
            </div>
        </section>

        <!-- EXPERIENCIA -->
        <section id="experiencia" class="pb-16">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="bg-brand-dark rounded-2xl shadow-2xl p-6 md:p-10 md:flex items-center gap-10 border border-brand-red/50">
                    <div class="md:w-1/2 mb-6 md:mb-0">
                        <img
                            src="https://placehold.co/600x400/DC2626/FFFFFF?text=Ambiente+Punto+Cero"
                            alt="Interior del local de Punto Cero al Barril"
                            class="rounded-xl shadow-xl w-full h-auto border-4 border-brand-gold"
                            onerror="this.onerror=null;this.src='https://placehold.co/600x400/DC2626/FFFFFF?text=Ambiente';"
                        >
                    </div>
                    <div class="md:w-1/2">
                        <h2 class="text-2xl md:text-3xl font-bold mb-4 brand-gold-text product-name">
                            La aut√©ntica experiencia <span class="brand-red-text">al barril</span>
                        </h2>
                        <p class="mb-3 text-gray-200 text-sm md:text-base">
                            En Punto Cero, la cocci√≥n es un ritual. Usamos barriles preparados y maderas seleccionadas
                            para darle a cada corte ese ahumado profundo, jugoso y con crocante perfecto.
                        </p>
                        <p class="text-gray-200 text-sm md:text-base">
                            Ven con tu familia, tu pareja o tu gente. T√∫ traes el hambre, nosotros ponemos el fuego.
                        </p>
                        <ul class="list-none mt-5 space-y-2 text-sm md:text-base text-gray-200">
                            <li>
                                <i class="fas fa-check-circle text-brand-red mr-2"></i>
                                Carnes marinadas por 12 horas.
                            </li>
                            <li>
                                <i class="fas fa-check-circle text-brand-red mr-2"></i>
                                Cocci√≥n en barril con maderas frutales seleccionadas.
                            </li>
                            <li>
                                <i class="fas fa-check-circle text-brand-red mr-2"></i>
                                Salsas BBQ artesanales y picantes de la casa.
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- CHECKOUT -->
    <main id="checkout-page" class="hidden relative z-10 py-14 md:py-16">
        <div class="container mx-auto px-4 sm:px-6">
            <h2 class="text-3xl md:text-4xl text-center text-white grill-glow-text mb-10 product-name">
                Finalizar Pedido
            </h2>

            <!-- Carrito vac√≠o -->
            <div
                id="cart-empty-message"
                class="hidden text-center py-10 bg-brand-dark/90 rounded-2xl border border-brand-red/50 max-w-2xl mx-auto"
            >
                <i class="fas fa-shopping-basket text-gray-600 text-5xl mb-4"></i>
                <p class="text-gray-300 text-lg mb-3">
                    Tu carrito de BBQ est√° vac√≠o‚Ä¶ todav√≠a. üî•
                </p>
                <button
                    onclick="showPage('home')"
                    class="mt-4 bg-brand-red text-white text-sm md:text-base font-semibold py-3 px-8 rounded-full hover:bg-brand-red-dark"
                >
                    Ver men√∫
                </button>
            </div>
            
            <div id="cart-content" class="grid grid-cols-1 lg:grid-cols-2 gap-10">
                <!-- COLUMNA 1: MODALIDAD Y DATOS -->
                <div>
                    <h3 class="text-xl md:text-2xl text-white mb-5 product-name">
                        1. Modalidad y datos
                    </h3>
                    
                    <!-- Modalidad -->
                    <div class="mb-6">
                        <div class="flex flex-col sm:flex-row gap-3">
                            <label class="flex items-center bg-brand-dark/80 p-3 rounded-xl border border-brand-gold/60 cursor-pointer flex-1 transition-all hover:bg-brand-dark/90">
                                <input
                                    type="radio"
                                    name="orderType"
                                    value="dineIn"
                                    checked
                                    class="mr-3 text-brand-red focus:ring-brand-red border-gray-700"
                                    id="radio-dine-in"
                                >
                                <span class="font-bold text-white text-sm md:text-base">
                                    <i class="fas fa-utensils mr-2 text-brand-red"></i>
                                    Servir en mesa
                                </span>
                            </label>
                            <label class="flex items-center bg-brand-dark/80 p-3 rounded-xl border border-brand-gold/60 cursor-pointer flex-1 transition-all hover:bg-brand-dark/90">
                                <input
                                    type="radio"
                                    name="orderType"
                                    value="delivery"
                                    class="mr-3 text-brand-red focus:ring-brand-red border-gray-700"
                                    id="radio-delivery"
                                >
                                <span class="font-bold text-white text-sm md:text-base">
                                    <i class="fas fa-motorcycle mr-2 text-brand-red"></i>
                                    Entrega a domicilio
                                </span>
                            </label>
                        </div>
                    </div>

                    <!-- FORMULARIO -->
                    <form id="order-form" class="space-y-4">
                        <!-- DINE-IN -->
                        <div id="dine-in-fields" class="bg-white p-5 rounded-lg shadow-xl text-gray-808">
                            <div class="mb-4">
                                <label for="table-number" class="block text-gray-700 font-bold mb-2">
                                    N√∫mero de mesa
                                </label>
                                <input
                                    type="number"
                                    id="table-number"
                                    name="table-number"
                                    class="w-full px-3 py-2 border rounded-lg focus:ring-brand-red focus:border-brand-red text-sm"
                                    placeholder="Ej: 5"
                                    min="1"
                                    required
                                >
                            </div>
                            <div>
                                <label for="client-name-local" class="block text-gray-700 font-bold mb-2">
                                    Nombre (opcional)
                                </label>
                                <input
                                    type="text"
                                    id="client-name-local"
                                    name="client-name-local"
                                    class="w-full px-3 py-2 border rounded-lg focus:ring-brand-red focus:border-brand-red text-sm"
                                    placeholder="Tu nombre"
                                >
                            </div>
                        </div>

                        <!-- DELIVERY -->
                        <div id="delivery-fields" class="bg-white p-5 rounded-lg shadow-xl text-gray-800 hidden">
                            <div class="mb-3">
                                <label for="name" class="block text-gray-700 font-bold mb-2">
                                    Nombre completo
                                </label>
                                <input
                                    type="text"
                                    id="name"
                                    name="name"
                                    class="w-full px-3 py-2 border rounded-lg focus:ring-brand-red focus:border-brand-red text-sm"
                                    placeholder="Tu nombre"
                                    required
                                    disabled
                                >
                            </div>
                            <div class="mb-3">
                                <label for="phone" class="block text-gray-700 font-bold mb-2">
                                    N√∫mero de WhatsApp
                                </label>
                                <input
                                    type="tel"
                                    id="phone"
                                    name="phone"
                                    class="w-full px-3 py-2 border rounded-lg focus:ring-brand-red focus:border-brand-red text-sm"
                                    placeholder="Ej: 0999999999"
                                    required
                                    disabled
                                >
                            </div>
                            <div class="mb-3">
                                <label for="address" class="block text-gray-700 font-bold mb-2">
                                    Direcci√≥n de entrega
                                </label>
                                <textarea
                                    id="address"
                                    name="address"
                                    rows="3"
                                    class="w-full px-3 py-2 border rounded-lg focus:ring-brand-red focus:border-brand-red text-sm resize-none"
                                    placeholder="Calle, barrio, referencia..."
                                    required
                                    disabled
                                ></textarea>
                            </div>
                            <div class="mb-3">
                                <button
                                    type="button"
                                    id="share-location-btn-checkout"
                                    class="w-full bg-blue-600 text-white text-sm font-bold py-2.5 px-4 rounded-full hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 disabled:opacity-60"
                                    disabled
                                >
                                    <i class="fas fa-map-marker-alt"></i>
                                    Compartir ubicaci√≥n (opcional)
                                </button>
                                <p
                                    id="location-status-checkout"
                                    class="text-xs text-center text-green-600 font-semibold mt-2"
                                ></p>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- COLUMNA 2: RESUMEN + PAGO -->
                <div>
                    <div class="flex justify-between items-center mb-5">
                        <h3 class="text-xl md:text-2xl text-white product-name">
                            2. Resumen de tu orden
                        </h3>
                        <button
                            id="clear-cart-btn"
                            title="Vaciar carrito"
                            class="text-red-400 hover:text-white text-xs md:text-sm font-semibold"
                            type="button"
                        >
                            Vaciar carrito
                        </button>
                    </div>
                    
                    <div
                        id="checkout-summary"
                        class="bg-brand-dark p-5 rounded-lg shadow-xl border border-brand-gold/50 text-sm md:text-base"
                    >
                        <!-- Resumen generado por JS -->
                    </div>
                    
                    <div class="bg-brand-dark p-5 rounded-lg shadow-xl mt-7 border border-brand-red/50 text-sm">
                        <h3 class="text-lg md:text-xl brand-gold-text mb-3 font-bold product-name">
                            Informaci√≥n de pago
                        </h3>
                        <div class="bg-gray-900 border border-gray-700 text-gray-200 p-4 rounded-lg space-y-1">
                            <p>Aceptamos pagos en efectivo y transferencias.</p>
                            <p><strong>Banco:</strong> (Nombre del banco aqu√≠)</p>
                            <p><strong>Cuenta de ahorros:</strong> (Tu n√∫mero de cuenta)</p>
                            <p><strong>A nombre de:</strong> (Tu nombre / raz√≥n social)</p>
                            <p><strong>C.I. / RUC:</strong> (Tu documento)</p>
                        </div>
                        <p class="mt-2 text-[11px] text-gray-400">
                            *Puedes adjuntar el comprobante por WhatsApp al confirmar tu pedido.
                        </p>
                    </div>

                    <button
                        type="submit"
                        form="order-form"
                        id="submit-order-btn"
                        class="w-full bg-brand-red text-white text-lg md:text-xl font-semibold py-3.5 rounded-full mt-7 hover:bg-brand-red-dark transition-colors flex items-center justify-center gap-2 shadow-2xl"
                    >
                        <i class="fab fa-whatsapp text-xl"></i>
                        Enviar pedido por WhatsApp
                    </button>
                </div>
            </div>
        </div>
    </main>

    <!-- FOOTER -->
    <footer
        id="footer-contact"
        class="bg-gray-950/95 text-gray-400 pt-10 pb-7 mt-14 border-t border-brand-red/20 relative z-10 text-sm"
    >
        <div class="container mx-auto px-4 sm:px-6 text-center">
            <div class="grid md:grid-cols-3 gap-7 mb-6">
                <div>
                    <h4 class="font-bold text-lg mb-2 brand-gold-text product-name">
                        Contacto
                    </h4>
                    <!-- CAMBIA EL WHATSAPP AQU√ç -->
                    <a
                        href="https://wa.me/593999999999"
                        target="_blank"
                        class="inline-block hover:text-white transition-colors"
                    >
                        <i class="fab fa-whatsapp mr-2"></i>
                        +593 99 999 9999
                    </a>
                    <p class="mt-2">
                        <i class="fas fa-envelope mr-2"></i>
                        puntoceroalbarril@email.com
                    </p>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-2 brand-gold-text product-name">
                        Ubicaci√≥n
                    </h4>
                    <!-- CAMBIA POR TU LINK DE MAPS -->
                    <a
                        href="#"
                        target="_blank"
                        class="inline-block hover:text-white transition-colors"
                    >
                        <i class="fas fa-map-marker-alt mr-2"></i>
                        (Tu direcci√≥n exacta aqu√≠)
                    </a>
                    <p>El mejor BBQ de tu ciudad.</p>
                </div>
                <div>
                    <h4 class="font-bold text-lg mb-2 brand-gold-text product-name">
                        Horario
                    </h4>
                    <p>Martes a domingo</p>
                    <p>12:00 pm - 10:00 pm</p>
                </div>
            </div>
            <div class="pt-5 border-t border-gray-800 text-xs text-gray-500">
                <p>&copy; 2024 Punto Cero al Barril. Todos los derechos reservados.</p>
                <p class="mt-2 text-[11px] text-gray-600">
                    Men√∫ digital desarrollado por el equipo de Bot &amp; Landing.
                </p>
            </div>
        </div>
    </footer>
    
    <!-- MODAL NOTIFICACI√ìN -->
    <div
        id="notification-modal"
        class="fixed inset-0 bg-black/70 z-[1002] flex items-center justify-center p-4 opacity-0 pointer-events-none"
    >
        <div class="bg-brand-dark rounded-xl p-7 text-center shadow-2xl max-w-sm w-full border border-brand-red modal-inner scale-95">
            <i class="fas fa-check-circle text-brand-gold text-4xl mb-3"></i>
            <h2 id="notification-message" class="text-lg md:text-xl font-bold text-white"></h2>
            <button
                id="close-notification-btn"
                class="mt-5 bg-brand-red text-white font-bold py-2.5 px-7 rounded-full hover:bg-brand-red-dark text-sm"
            >
                Listo
            </button>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DATA DE PRODUCTOS ---
        const products = [
            { id: 1, name: 'Costillas al Barril con Moro', price: 19.99, img: 'https://i.postimg.cc/7Ctqv01K/IMG-0314.jpg', desc: 'Tiernas costillas de cerdo asadas en barril, servidas con moro, papa frita, maduro, chorizo y salsas de la casa.' },
            { id: 2, name: 'Panceta Crujiente con Moro', price: 17.99, img: 'https://i.postimg.cc/1g7yxw0j/IMG-0313.jpg', desc: 'Panceta crocante acompa√±ada de moro, papa frita, maduro, chorizo y salsas exclusivas de la casa.' },
            { id: 3, name: 'Panceta Crujiente (Simple)', price: 15.00, img: 'https://i.postimg.cc/QBYjL1gS/IMG-0315.jpg', desc: 'Nuestra panceta crocante sin moro, acompa√±ada de papa frita, maduro, chorizo y salsas.' },
            { id: 4, name: 'Picanha Angus (300gr)', price: 18.00, img: 'https://i.postimg.cc/jW3RVP6Z/IMG-0316.jpg', desc: '300 gramos de Picanha Angus a la parrilla, servida con papa frita, maduro y chorizo.' },
            { id: 5, name: 'Bandeja Punto Cero (Picadita)', price: 22.00, img: 'https://i.postimg.cc/KKpmXB7D/IMG-0317.jpg', desc: 'Picadita para compartir (precio base). Pregunta por bandejas grandes: $32 y $52.' },
            { id: 6, name: 'Moro de la Casa', price: 3.50, img: 'https://placehold.co/400x224/8A3324/ffffff?text=Moro', desc: 'Porci√≥n extra de nuestro cremoso moro de la casa.' },
            { id: 7, name: 'Papa Frita Cl√°sica', price: 2.50, img: 'https://placehold.co/400x224/DDA520/333333?text=Papas+Fritas', desc: 'Porci√≥n de papas fritas, perfectas para acompa√±ar.' },
            { id: 8, name: 'Chorizo Ahumado Adicional', price: 4.00, img: 'https://placehold.co/400x224/505050/ffffff?text=Chorizo', desc: 'Unidad de chorizo artesanal ahumado.' },
        ];

        // --- ELEMENTOS DOM ---
        const productList = document.getElementById('product-list');
        const cartCountEl = document.getElementById('cart-count');
        const notificationModal = document.getElementById('notification-modal');
        const notificationMessage = document.getElementById('notification-message');
        const closeNotificationBtn = document.getElementById('close-notification-btn');
        const orderForm = document.getElementById('order-form');
        const checkoutSummary = document.getElementById('checkout-summary');
        const clearCartBtn = document.getElementById('clear-cart-btn');
        const cartEmptyMessage = document.getElementById('cart-empty-message');
        const cartContent = document.getElementById('cart-content');
        const shareLocationBtn = document.getElementById('share-location-btn-checkout');
        const locationStatus = document.getElementById('location-status-checkout');

        const dineInFields = document.getElementById('dine-in-fields');
        const deliveryFields = document.getElementById('delivery-fields');
        const radioDineIn = document.getElementById('radio-dine-in');
        const radioDelivery = document.getElementById('radio-delivery');

        const nameInput = document.getElementById('name');
        const phoneInput = document.getElementById('phone');
        const addressInput = document.getElementById('address');
        const tableNumberInput = document.getElementById('table-number');
        const clientNameLocalInput = document.getElementById('client-name-local');

        // --- ESTADO ---
        let cart = {};
        let sharedLocation = null;
        let orderType = 'dineIn';

        // Helpers
        function setInputRequired(input, isRequired) {
            input.required = isRequired;
            input.disabled = !isRequired;
        }

        function formatMoney(value) {
            return '$' + value.toFixed(2);
        }

        // Cambiar modalidad
        function handleOrderTypeChange() {
            orderType = document.querySelector('input[name="orderType"]:checked').value;

            // Reset ubicaci√≥n
            sharedLocation = null;
            locationStatus.textContent = '';
            shareLocationBtn.disabled = (orderType === 'dineIn');

            if (orderType === 'dineIn') {
                dineInFields.classList.remove('hidden');
                deliveryFields.classList.add('hidden');

                setInputRequired(tableNumberInput, true);
                setInputRequired(nameInput, false);
                setInputRequired(phoneInput, false);
                setInputRequired(addressInput, false);
            } else {
                dineInFields.classList.add('hidden');
                deliveryFields.classList.remove('hidden');

                setInputRequired(tableNumberInput, false);
                setInputRequired(nameInput, true);
                setInputRequired(phoneInput, true);
                setInputRequired(addressInput, true);
            }
        }

        // Render productos
        function renderProducts() {
            productList.innerHTML = '';
            products.forEach(product => {
                const card = document.createElement('div');
                card.className = 'product-card bg-brand-dark rounded-xl overflow-hidden flex flex-col shadow-lg border border-brand-red/60';
                card.innerHTML = `
                    <div class="image-box">
                        <img
                            src="${product.img}"
                            alt="${product.name}"
                            onerror="this.onerror=null;this.src='https://placehold.co/400x224/2C1E18/FCD34D?text=${encodeURIComponent(product.name)}';"
                        >
                    </div>
                    <div class="p-5 flex flex-col flex-1 text-center">
                        <h3 class="text-xl md:text-2xl font-bold mb-2 brand-gold-text product-name">${product.name}</h3>
                        <p class="text-xs md:text-sm flex-1 text-gray-300 mb-3">${product.desc}</p>
                        <p class="font-extrabold brand-red-text mt-2 text-lg md:text-xl">${formatMoney(product.price)}</p>
                        <div class="flex items-center justify-center space-x-4 my-4">
                            <button class="quantity-btn minus-btn bg-gray-700/60 text-white rounded-full w-8 h-8 text-lg font-bold hover:bg-brand-red transition-colors">-</button>
                            <span class="quantity-value text-xl font-bold text-white">1</span>
                            <button class="quantity-btn plus-btn bg-gray-700/60 text-white rounded-full w-8 h-8 text-lg font-bold hover:bg-brand-red transition-colors">+</button>
                        </div>
                        <button
                            class="add-to-cart-btn bg-brand-red text-white font-bold py-2.5 px-4 rounded-full hover:bg-brand-red-dark transition-colors text-sm md:text-base flex items-center justify-center gap-2"
                            data-id="${product.id}"
                            type="button"
                        >
                            <i class="fas fa-plus"></i>
                            A√±adir
                        </button>
                    </div>
                `;
                productList.appendChild(card);
            });
        }

        // Carrito
        function addToCart(productId, quantity = 1) {
            const idStr = String(productId);
            if (cart[idStr]) {
                cart[idStr].quantity += quantity;
            } else {
                const product = products.find(p => p.id == productId);
                if (!product) return;
                cart[idStr] = { ...product, quantity };
            }
            updateCartUI();
        }

        function updateCartUI() {
            const totalItems = Object.values(cart).reduce((sum, item) => sum + item.quantity, 0);
            cartCountEl.textContent = totalItems;
            updateCheckoutPage();
        }

        function updateCheckoutPage() {
            const cartHasItems = Object.keys(cart).length > 0;

            if (!cartHasItems) {
                cartEmptyMessage.classList.remove('hidden');
                cartContent.classList.add('hidden');
                checkoutSummary.innerHTML = `
                    <p class="text-gray-300 text-sm">
                        A√∫n no has agregado platos a tu pedido.
                    </p>
                `;
                return;
            }

            cartEmptyMessage.classList.add('hidden');
            cartContent.classList.remove('hidden');

            let subtotal = 0;
            let html = '';

            for (const id in cart) {
                const item = cart[id];
                const itemSubtotal = item.price * item.quantity;
                subtotal += itemSubtotal;

                html += `
                    <div class="py-3 border-b border-gray-700 last:border-b-0 flex justify-between items-center text-gray-200">
                        <div class="flex items-center text-sm md:text-base">
                            <span class="font-bold text-brand-gold mr-2">${item.quantity}x</span>
                            <span class="font-semibold">${item.name}</span>
                        </div>
                        <span class="font-bold text-white text-sm md:text-base">${formatMoney(itemSubtotal)}</span>
                    </div>
                `;
            }

            html += `
                <div class="mt-4 border-t border-brand-red pt-4 space-y-3 text-sm md:text-base">
                    <div class="flex justify-between text-gray-200">
                        <span>Subtotal</span>
                        <span>${formatMoney(subtotal)}</span>
                    </div>
                    <div class="flex justify-between font-extrabold text-lg md:text-xl brand-gold-text">
                        <span>Total a pagar</span>
                        <span>${formatMoney(subtotal)}</span>
                    </div>
                </div>
            `;

            checkoutSummary.innerHTML = html;
        }

        // Eventos en lista de productos
        productList.addEventListener('click', (e) => {
            const card = e.target.closest('.product-card');
            if (!card) return;

            const qtySpan = card.querySelector('.quantity-value');

            const qtyBtn = e.target.closest('.quantity-btn');
            if (qtyBtn && qtySpan) {
                let currentValue = parseInt(qtySpan.textContent, 10);
                if (qtyBtn.classList.contains('plus-btn')) {
                    currentValue++;
                } else if (qtyBtn.classList.contains('minus-btn') && currentValue > 1) {
                    currentValue--;
                }
                qtySpan.textContent = String(currentValue);
                return;
            }

            const addBtn = e.target.closest('.add-to-cart-btn');
            if (addBtn && qtySpan) {
                const id = addBtn.dataset.id;
                const quantity = parseInt(qtySpan.textContent, 10);
                addToCart(id, quantity);

                const product = products.find(p => p.id == Number(id));
                const nombre = product ? product.name : 'Producto';
                showNotification(`${quantity} ${nombre}(s) a√±adido(s) al carrito üî•`);
                qtySpan.textContent = '1';
            }
        });

        // Modalidad radio
        radioDineIn.addEventListener('change', handleOrderTypeChange);
        radioDelivery.addEventListener('change', handleOrderTypeChange);

        // Vaciar carrito
        clearCartBtn.addEventListener('click', () => {
            cart = {};
            updateCartUI();
            showNotification('El carrito ha sido vaciado.');
        });

        // Geolocalizaci√≥n
        shareLocationBtn.addEventListener('click', () => {
            if (!navigator.geolocation) {
                locationStatus.textContent = 'La geolocalizaci√≥n no es soportada en este dispositivo.';
                return;
            }

            locationStatus.textContent = 'Obteniendo ubicaci√≥n...';
            shareLocationBtn.classList.add('bg-yellow-600');
            shareLocationBtn.classList.remove('bg-blue-600');

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const { latitude, longitude } = position.coords;
                    sharedLocation = `https://www.google.com/maps?q=${latitude},${longitude}`;
                    locationStatus.textContent = '‚úÖ Ubicaci√≥n a√±adida al pedido.';
                    shareLocationBtn.classList.remove('bg-yellow-600');
                    shareLocationBtn.classList.add('bg-green-600');
                },
                () => {
                    locationStatus.textContent = '‚ùå No se pudo obtener la ubicaci√≥n. Ingresa la direcci√≥n manualmente.';
                    shareLocationBtn.classList.remove('bg-yellow-600');
                    shareLocationBtn.classList.add('bg-blue-600');
                }
            );
        });

        // Enviar pedido
        orderForm.addEventListener('submit', (e) => {
            e.preventDefault();

            if (Object.keys(cart).length === 0) {
                showNotification('Tu carrito est√° vac√≠o. Agrega al menos un plato antes de enviar el pedido.');
                return;
            }

            const currentOrderType = document.querySelector('input[name="orderType"]:checked').value;
            let message = '¬°Hola Punto Cero al Barril! üî• Quisiera hacer el siguiente pedido:\n\n';

            let total = 0;
            for (const id in cart) {
                const item = cart[id];
                message += `‚Ä¢ ${item.quantity}x - ${item.name}\n`;
                total += item.price * item.quantity;
            }

            message += `\nTotal aproximado: *${formatMoney(total)}*\n\n`;

            if (currentOrderType === 'dineIn') {
                const mesa = (tableNumberInput.value || '').trim();
                const nombreLocal = (clientNameLocalInput.value || '').trim();

                if (!mesa) {
                    showNotification('Por favor, ingresa tu n√∫mero de mesa.');
                    return;
                }

                message += '*Modalidad:* Servir en mesa üçΩÔ∏è\n';
                message += `*Mesa:* ${mesa}\n`;
                if (nombreLocal) {
                    message += `*Nombre:* ${nombreLocal}\n`;
                }
            } else {
                const name = (nameInput.value || '').trim();
                const phone = (phoneInput.value || '').trim();
                const address = (addressInput.value || '').trim();

                if (!name || !phone || !address) {
                    showNotification('Para domicilio, completa Nombre, WhatsApp y Direcci√≥n.');
                    return;
                }

                message += '*Modalidad:* Entrega a domicilio üõµ\n';
                message += `*Nombre:* ${name}\n`;
                message += `*WhatsApp:* ${phone}\n`;
                message += `*Direcci√≥n:* ${address}\n`;
                if (sharedLocation) {
                    message += `*Ubicaci√≥n (Maps):* ${sharedLocation}\n`;
                } else {
                    message += '*Ubicaci√≥n:* No enviada (puedo enviar luego por chat).\n';
                }
            }

            message += '\nPor favor, confirmen el total y el tiempo estimado. üôèüî•';

            // ‚ö†Ô∏è CAMBIA ESTE N√öMERO POR EL WHATSAPP REAL DEL LOCAL
            const whatsappNumber = '593999999999'; // ejemplo: '593987654321'
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;

            window.open(whatsappUrl, '_blank');

            // Reset
            cart = {};
            sharedLocation = null;
            orderForm.reset();
            handleOrderTypeChange();
            updateCartUI();
            showPage('home');
            showNotification('¬°Pedido enviado! Revisa tu WhatsApp para la confirmaci√≥n de Punto Cero al Barril.');
        });

        // Navegaci√≥n entre "p√°ginas"
        const pages = document.querySelectorAll('main');
        window.showPage = (pageId) => {
            pages.forEach(page => page.classList.add('hidden'));
            const target = document.getElementById(`${pageId}-page`);
            if (target) {
                target.classList.remove('hidden');
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
            if (pageId === 'checkout') {
                updateCheckoutPage();
            }
        };

        // Notificaciones
        function showNotification(message) {
            notificationMessage.textContent = message;
            notificationModal.classList.remove('opacity-0', 'pointer-events-none');
            notificationModal.querySelector('.modal-inner').classList.remove('scale-95');
        }

        function hideNotification() {
            notificationModal.classList.add('opacity-0', 'pointer-events-none');
            notificationModal.querySelector('.modal-inner').classList.add('scale-95');
        }

        closeNotificationBtn.addEventListener('click', hideNotification);
        notificationModal.addEventListener('click', (e) => {
            if (e.target === notificationModal) hideNotification();
        });

        // Inicial
        renderProducts();
        updateCartUI();
        handleOrderTypeChange();
    });
    </script>
</body>
</html>
